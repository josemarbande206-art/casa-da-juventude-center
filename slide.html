<!doctype html>
<html lang="pt-PT">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Slider / Animação de Slides</title>
  <style>
    /* Reset simples */
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%}
    body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;color:#111;background:#f4f6f8;display:flex;align-items:center;justify-content:center;padding:24px}

    /* Container do slider */
    .slider {
      width:100%;
      max-width:980px;
      position:relative;
      overflow:hidden;
      border-radius:12px;
      background:#000;
      box-shadow:0 10px 30px rgba(2,6,23,0.15);
    }

    /* Track que desliza (flex row) */
    .slider-track {
      display:flex;
      transition:transform 600ms cubic-bezier(.22,.9,.3,1);
      will-change:transform;
    }

    /* Cada slide */
    .slide {
      min-width:100%;
      display:flex;
      align-items:center;
      justify-content:center;
      position:relative;
      color:white;
      height:420px;
      overflow:hidden;
    }

    /* Exemplo de fundo/overlay */
    .slide img.bg {
      position:absolute;
      inset:0;
      width:100%;
      height:100%;
      object-fit:cover;
      filter:brightness(.55);
      transform-origin:center;
      transition:transform 1.2s ease;
    }

    .slide .content {
      position:relative;
      z-index:2;
      text-align:left;
      max-width:70%;
      padding:24px;
    }

    .slide h2 { font-size:2.0rem; margin-bottom:0.5rem; letter-spacing: -0.02em }
    .slide p { font-size:1rem; opacity:.9; line-height:1.4 }

    /* Lifting effect no slide activo */
    .slide.active img.bg { transform:scale(1.06) }

    /* Controles (prev/next) */
    .control {
      position:absolute;
      top:50%;
      transform:translateY(-50%);
      background:rgba(0,0,0,.45);
      border:0;
      color:white;
      width:44px;
      height:44px;
      border-radius:10px;
      display:flex;
      align-items:center;
      justify-content:center;
      cursor:pointer;
      z-index:5;
      backdrop-filter:blur(6px);
    }
    .control:focus{outline:2px solid #fff3}
    .control:hover{background:rgba(0,0,0,.6)}
    .control.prev{left:12px}
    .control.next{right:12px}

    /* Dots (paginador) */
    .dots {
      position:absolute;
      left:50%;
      transform:translateX(-50%);
      bottom:12px;
      display:flex;
      gap:8px;
      z-index:6;
    }
    .dot {
      width:10px;height:10px;border-radius:999px;border:2px solid rgba(255,255,255,.7);
      background:transparent;cursor:pointer;
      transition:transform 200ms, background 200ms;
    }
    .dot.active { background:white; transform:scale(1.15); }

    /* Small screens adjustments */
    @media (max-width:640px){
      .slide { height:300px }
      .slide .content { max-width:85%; padding:16px }
      .slide h2 { font-size:1.4rem }
    }
  </style>
</head>
<body>

  <div class="slider" id="mySlider" aria-label="Galeria de imagens">
    <div class="slider-track" id="sliderTrack">
      <!-- Slide 1 -->
      <section class="slide" data-slide-index="0" aria-hidden="false">
        <img class="bg" src="https://images.unsplash.com/photo-152640324741-9b1268d6f6b2?q=80&w=1600&auto=format&fit=crop" alt="">
        <div class="content">
          <h2>Bem-vindo ao Centro Casa da Juventude</h2>
          <p>Oferecemos cursos, actividades e apoio à juventude local — descubra as nossas iniciativas e eventos.</p>
        </div>
      </section>

      <!-- Slide 2 -->
      <section class="slide" data-slide-index="1" aria-hidden="true">
        <img class="bg" src="https://images.unsplash.com/photo-1523473827532-96c41cab87f4?q=80&w=1600&auto=format&fit=crop" alt="">
        <div class="content">
          <h2>Cursos e Formação</h2>
          <p>Capacitação em informática, empreendedorismo e oficinas criativas para jovens de todas as idades.</p>
        </div>
      </section>

      <!-- Slide 3 -->
      <section class="slide" data-slide-index="2" aria-hidden="true">
        <img class="bg" src="https://images.unsplash.com/photo-1507668077129-56d8b5bf4c3d?q=80&w=1600&auto=format&fit=crop" alt="">
        <div class="content">
          <h2>Actividades e Eventos</h2>
          <p>Eventos comunitários, feiras de emprego e espaços de encontro para partilha de ideias e projetos.</p>
        </div>
      </section>
    </div>

    <!-- Controls -->
    <button class="control prev" id="prevBtn" aria-label="Slide anterior">&larr;</button>
    <button class="control next" id="nextBtn" aria-label="Próximo slide">&rarr;</button>

    <!-- Dots -->
    <div class="dots" id="dotsContainer" role="tablist" aria-label="Navegação de slides"></div>
  </div>

  <script>
    (function(){
      const slider = document.getElementById('mySlider');
      const track = document.getElementById('sliderTrack');
      const slides = Array.from(track.children);
      const prevBtn = document.getElementById('prevBtn');
      const nextBtn = document.getElementById('nextBtn');
      const dotsContainer = document.getElementById('dotsContainer');

      let current = 0;
      const slideCount = slides.length;
      const autoplayDelay = 4500; // ms
      let autoplayTimer = null;
      let isFocusedOrHovered = false;

      // Criar dots dinamicamente
      slides.forEach((s, i) => {
        const dot = document.createElement('button');
        dot.className = 'dot';
        dot.setAttribute('aria-label', Ir para slide ${i+1});
        dot.setAttribute('role', 'tab');
        dot.dataset.index = i;
        dot.addEventListener('click', ()=>goTo(i));
        dotsContainer.appendChild(dot);
      });
      const dots = Array.from(dotsContainer.children);

      // Atualiza posição e estados
      function update() {
        const x = -current * 100;
        track.style.transform = translateX(${x}%);

        slides.forEach((s, i) => {
          const isActive = i === current;
          s.classList.toggle('active', isActive);
          s.setAttribute('aria-hidden', String(!isActive));
        });

        dots.forEach((d,i) => d.classList.toggle('active', i === current));
      }

      function prev() { goTo((current - 1 + slideCount) % slideCount) }
      function next() { goTo((current + 1) % slideCount) }

      function goTo(index) {
        current = Math.max(0, Math.min(slideCount-1, index));
        update();
        restartAutoplay();
      }

      // Autoplay
      function startAutoplay(){
        stopAutoplay();
        autoplayTimer = setInterval(()=>{
          if(!isFocusedOrHovered) next();
        }, autoplayDelay);
      }
      function stopAutoplay(){ if(autoplayTimer){ clearInterval(autoplayTimer); autoplayTimer = null } }
      function restartAutoplay(){ stopAutoplay(); startAutoplay(); }

      // Pausar ao colocar o rato ou foco
      slider.addEventListener('mouseenter', ()=>{ isFocusedOrHovered = true });
      slider.addEventListener('mouseleave', ()=>{ isFocusedOrHovered = false });

      slider.addEventListener('focusin', ()=>{ isFocusedOrHovered = true });
      slider.addEventListener('focusout', ()=>{ isFocusedOrHovered = false });

      // Controles
      prevBtn.addEventListener('click', prev);
      nextBtn.addEventListener('click', next);

      // Teclado
      slider.addEventListener('keydown', (e)=>{
        if(e.key === 'ArrowLeft') prev();
        if(e.key === 'ArrowRight') next();
      });

      // Swipe / Touch básico
      (function addTouchSupport(){
        let startX = 0, dx = 0, startTime = 0;
        const threshold = 50; // px mínimo para considerar swipe
        track.addEventListener('touchstart', e => {
          const t = e.touches[0];
          startX = t.clientX;
          startTime = Date.now();
          stopAutoplay();
        }, {passive:true});

        track.addEventListener('touchmove', e => {
          const t = e.touches[0];
          dx = t.clientX - startX;
          // opcional: mover track ligeiramente enquanto arrasta (pequena preview)
          track.style.transition = 'none';
          track.style.transform = translateX(${ -current*100 + (dx / slider.clientWidth) * 100 }%);
        }, {passive:true});

        track.addEventListener('touchend', e => {
          track.style.transition = '';
          const dt = Date.now() - startTime;
          if(Math.abs(dx) > threshold && dt < 800){
            if(dx < 0) next(); else prev();
          } else {
            update(); // volta à posição actual
          }
          dx = 0;
          startX = 0;
          restartAutoplay();
        });
      })();

      // Acessibilidade: permitir focus no slider
      slider.tabIndex = 0;

      // Inicializar
      update();
      startAutoplay();

      // Expor funções ao escopo em caso de personalização via console
      window._simpleSlider = { goTo, next, prev, startAutoplay, stopAutoplay };
    })();
  </script>
</body>
</html>